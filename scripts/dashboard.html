# Create/overwrite the dashboard.html with correct content
(infra-auto) PS C:\Career_Transition\scripts> @'
<!DOCTYPE html>
<html>
<head>
    <title>System Monitor Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body { font-family: Arial; margin: 20px; background: #f5f5f5; }
        .container { max-width: 1200px; margin: auto; }
        .header { background: #2c3e50; color: white; padding: 20px; border-radius: 5px; margin-bottom: 20px; }
        .metrics-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .metric-card { background: white; padding: 20px; border-radius: 5px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .metric-value { font-size: 2em; font-weight: bold; margin: 10px 0; }
        .metric-label { color: #666; }
        .chart-container { background: white; padding: 20px; border-radius: 5px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); margin-bottom: 20px; }
        .service-list { background: white; padding: 20px; border-radius: 5px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .service { padding: 8px; border-bottom: 1px solid #eee; }
        .status-running { color: #27ae60; font-weight: bold; }
        .status-stopped { color: #e74c3c; font-weight: bold; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üè• System Health Dashboard</h1>
            <p>Last updated: <span id="timestamp">Loading...</span></p>
        </div>
        
        <div class="metrics-grid">
            <div class="metric-card">
                <div class="metric-label">CPU Usage</div>
                <div class="metric-value" id="cpu">--%</div>
            </div>
            <div class="metric-card">
                <div class="metric-label">Memory Usage</div>
                <div class="metric-value" id="memory">--%</div>
            </div>
            <div class="metric-card">
                <div class="metric-label">Available Memory</div>
                <div class="metric-value" id="mem-available">-- GB</div>
            </div>
            <div class="metric-card">
                <div class="metric-label">Disk Usage</div>
                <div class="metric-value" id="disk">--%</div>
            </div>
        </div>
        
        <div class="chart-container">
            <h3>Performance History (Last 24 Hours)</h3>
            <canvas id="historyChart"></canvas>
        </div>
        
        <div class="service-list">
            <h3>Critical Services Status</h3>
            <div id="services">Checking...</div>
        </div>
    </div>

    <script>
    // Fetch and update data every 10 seconds
    async function updateDashboard() {
        try {
            const response = await fetch('/api/metrics');
            const data = await response.json();
            
            // Update metrics
            document.getElementById('timestamp').textContent = data.timestamp || 'N/A';
            document.getElementById('cpu').textContent = data.cpu_percent ? data.cpu_percent.toFixed(1) + '%' : '--%';
            document.getElementById('memory').textContent = data.memory_percent ? data.memory_percent.toFixed(1) + '%' : '--%';
            document.getElementById('mem-available').textContent = data.memory_available_gb ? data.memory_available_gb.toFixed(1) + ' GB' : '-- GB';
            document.getElementById('disk').textContent = data.disk_usage_percent ? data.disk_usage_percent.toFixed(1) + '%' : '--%';
            
            // Update services
            if (data.services) {
                let servicesHtml = '';
                for (const [name, status] of Object.entries(data.services)) {
                    const statusClass = status.status === 'Running' ? 'status-running' : 'status-stopped';
                    servicesHtml += `<div class="service">${name}: <span class="${statusClass}">${status.status}</span></div>`;
                }
                document.getElementById('services').innerHTML = servicesHtml;
            }
        } catch (error) {
            console.error('Error updating dashboard:', error);
        }
    }
    
    // Load historical data for chart
    async function loadHistoryChart() {
        try {
            const response = await fetch('/api/history/24');
            const historyData = await response.json();
            
            const ctx = document.getElementById('historyChart').getContext('2d');
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: historyData.map(d => new Date(d.time).toLocaleTimeString()),
                    datasets: [
                        {
                            label: 'CPU %',
                            data: historyData.map(d => d.cpu),
                            borderColor: '#3498db',
                            tension: 0.1
                        },
                        {
                            label: 'Memory %',
                            data: historyData.map(d => d.memory),
                            borderColor: '#2ecc71',
                            tension: 0.1
                        },
                        {
                            label: 'Disk %',
                            data: historyData.map(d => d.disk),
                            borderColor: '#e74c3c',
                            tension: 0.1
                        }
                    ]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100
                        }
                    }
                }
            });
        } catch (error) {
            console.error('Error loading chart:', error);
        }
    }
    
    // Initial load
    updateDashboard();
    loadHistoryChart();
    
    // Auto-refresh every 10 seconds
    setInterval(updateDashboard, 10000);
    </script>
</body>
</html>
'@ | Out-File -FilePath "templates\dashboard.html" -Encoding utf8

Write-Host "Created templates/dashboard.html" -ForegroundColor Green